\renewcommand{\nomebreve}{pacman\_best}
\renewcommand{\titolo}{Miglior percorso di un pacman}

\introduzione{}
\vspace{-1cm}

Tutti sanno che il giallo pacman è un tipo tranquillo che pensa solo a percorrere la propria strada. Quando pacman si imbatte in un fantasmino il suo percorso è giunto al termine e per lui è game over. Ma sul campo di gioco sono cosparsi dei pillolazzi che donano a pacman un superpotere: quando pacman ne raccoglie uno esso gli assicura protezione per un certo intervallo di tempo. Quando pacman è sotto l'effetto di qualche pillolazzo il suo colore, da giallo, è diventato blu, ed ora sono i fantasmi a doverlo temere!

\hspace{0.8cm}
\includegraphics[width=0.1\textwidth]{figures/pacman_big.png}
\hfill
\includegraphics[width=0.22\textwidth]{figures/pacman_field.jpeg}
\hfill
\includegraphics[width=0.22\textwidth]{figures/pacman_rage.png}

Un pacman si muove su una griglia rettangolare di dimensioni $M\times N$.
Parte giallo dalla cella $(1,1)$ in alto a sinistra, e cerca di raggiungere la cella $(M,N)$ in basso a destra.
Per farlo ha due tipi di mosse da considerarsi valide purch\`e non portino pacman fuori dalla griglia:
\begin{itemize}
   \item[] {\bf verso destra:} dalla cella $(i,j)$ alla cella $(i+1,j)$;
   \item[] {\bf verso il basso:} dalla cella $(i,j)$ alla cella $(i,j+1)$.
\end{itemize}

Ogni cella della griglia è contrassegnata da un carattere che ne specifica la tipologia come da seguente tabella:
\begin{itemize}
   \item['\#'] cella muro, resterà sempre inaccessibile a pacman;
   \item['+'] cella libera, pacman può visitarla liberamente;
   \item['*'] cella fantasma. Se pacman è giallo quando ci arriva allora il fantasmino che abita la cella se lo pappa ed il suo percorso si conclude quì. Altrimenti, se pacman giunge blu alla cella in quanto ancora sotto effetto di qualche pillolazzo precedentemente incontrato, allora è lui che cattura il fantasmino e può tranquillamente proseguire il proprio percorso come se nulla fosse successo.
   \item[n] quì $n$ è un numero naturale compreso tra $1$ e $9$. Siamo in una cella pillolazzo. Quando pacman dovesse transitare per questa cella si assicura di essere di colore blu nelle prossime $n$ celle che andrà a visitare. Quando pacman è di colore blu è lui ad avere la meglio sui fantasmini che incontra.
\end{itemize}

Si richiede di individuare se esista un percorso \emph{completo}, ossia un percorso valido che consenta al pacman di raggiungere vivo la cella $(M,N)$. In caso affermativo, si individui un percorso completo dove sia massimo il numero di fantasmini catturati, in subordine, si minimizzi il numero di celle pillolazzo visitate. In caso contrario, si individui un percorso non completo ottimo secondo lo stesso criterio (massimo numero di fantasmini catturati e, in subordine, minimo numero di celle pillolazzo visitate).

\section*{Dati di input}

L'input deve avvenire da stdin.
La prima riga contiene due interi positivi $M$ ed $N$, separati da spazio, i quali rappresentano le dimensioni della scacchiera.
Le successive $M$ righe rappresentano la mappa: la $r$-esima di tali righe contiene una
sequenza di $N$ caratteri nell'alfabeto $\{+,\#,*,1,2,3,4,5,6,7,8,9\}$, il cui significato è quello specificato più sopra.
Ovviamente, il $c$-esimo carattere di questa riga si riferisce alla cella $(r, c)$ della mappa. I caratteri NON sono separati da spazi.

Tenete presente che ci saranno i caratteri di terminazione di riga. (Potete avvalervi del template di soluzione fornito in attachment alla pagina del problema per gestire in modo robusto queste piccole noie). 

\section*{Dati di output}

L'output deve avvenire su stdout, dove il vostro programma deve restituire una sola riga contenente tre numeri separati da spazio.
Il primo numero $x$ è $1$ se esiste un percorso completo, e $0$ altrimenti.
Il secondo numero $f$ è il massimo numero di fantasmini che possano essere catturati lungo un percorso che si richiede essere completo per quelle istanze dove ne esista uno, altrimenti ogni percorso valido va bene anche se non porta il pacman fino in $(M,N)$.
Il terzo numero $p$ è il minimo numero di celle pillolazzo che debbano essere visitate da un percorso che comunque attenga $x$ ed $f$.


% Esempi
\section*{Esempio di input/output}

In attachment alla pagina del problema trovate diverse copie input/output tra cui le seguenti.

\vspace{0.5cm}
\esempio{
\input{esempioF1}
}{1 1 2}

\esempio{
\input{esempioF2}
}{1 2 2}

\esempio{
\input{esempioF3}
}{0 1 1}

\section*{Assunzioni}
\begin{itemize}
\item pacman nasce giallo nella cella $(1, 1)$, una cella sgombra da fantasmi e non di muro
\item $0 < M,N \le 200$
\end{itemize}

\section*{Subtask}
\begin{itemize}
\item \textbf{Subtask 1 [0 punti]:} casi di esempio (inclusi quelli in attachment).
\item \textbf{Subtask 2 [10 punti]:} senza fantasmi nè pillolazzi, $M,N \le 10$.
\item \textbf{Subtask 3 [10 punti]:} senza fantasmi nè muri, $M,N \le 10$.
\item \textbf{Subtask 4 [10 punti]:} senza pillolazzi, $M,N \le 10$.
\item \textbf{Subtask 5 [10 punti]:} senza fantasmi, $M,N \le 10$.
\item \textbf{Subtask 6 [10 punti]:} $M,N \le 10$.
\item \textbf{Subtask 7 [10 punti]:} senza fantasmi nè pillolazzi, $M,N \le 100$.
\item \textbf{Subtask 8 [10 punti]:} senza pillolazzi, $M,N \le 100$.
\item \textbf{Subtask 9 [10 punti]:} senza fantasmi, $M,N \le 100$.
\item \textbf{Subtask 10 [20 punti]:} $M,N \le 100$.
\end{itemize}

\end{document}

